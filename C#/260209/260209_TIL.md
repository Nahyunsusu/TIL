# 레이어 마스크


## LayerMask 사용 예시
```csharp
// 특정 레이어 선택
int layerMask = 1 << LayerMask.NameToLayer("Enemy");

// 여러 레이어 선택
LayerMask mask = LayerMask.GetMask("Enemy", "Obstacle");

if(Physics.Raycast(transform.position, transform.forward, out hit, 10f, mask))
{

}
```

## LayerMask 함수 종류
1. LayerMask.GetMask
    
    레이어 이름 묶음을 생성하는 함수 -> Enemy가 8번 레이어(Layer)
    ```csharp
    LayerMask.GetMask("Enemy", "Obstacle");
    // Enemy 가 8번 레이어(Layer)라면?
    // 1 << 8 (값 256)
    ```
2. LayerMask.NameToLayer 레이어의 인덱스(int)를 반환
    ```csharp
    LayerMask.NameToLayer("Enemy");
    // int 반환값 = 8
    ```
3. LayerMask.LayerToName 레이어의 이름(string)을 반환
    ```csharp
    LayerMask.LayerToName(8);
    ```
4. LayerMask.value 비트마스크 값을 나타냄. 주로 비트 연산 수행
    ```csharp
    int bitMask = enemyLayer.value | obstacle.value;
    ```

## 비트 연산의 원리
- 1 << n : n번 레이어의 스위치를 켠다
- |(or) : 필터에 레이어를 추가한다.
- &(and) : 이 오브젝트도 포함되어 있으면 (true)
  
  ### 특정 레이어 포함 여부 체크 (&)
  ```csharp
    public static class Extensions
  {
    public static bool Contains(this LayerMask mask, int layer)
    {
      return (mask.value & (1 << layer)) != 0;
    }
    
    public static bool Contains(this LayerMask maks, GameObject obj)
    {
      return (mask.value & (1 << obj.layer)) != 0;
    }
  }

  if(mask.Contains(obj, layer)) {}
  ``` 